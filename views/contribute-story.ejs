<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>contribute To A Story</title>
  <!-- <link rel="stylesheet" href="/styles/read.css" /> -->
</head>

<body>
  <nav>
    <%- include('partials/_navBar') %>
  </nav>

  <header>
    <%- include('partials/_header') %>
  </header>

  <main class="main-content">
    <!-- Original Story Block -->
    <section class="story-block owner-story">
      <div class="story-header">
        <div class="user-info">
          <img src="<%= story.user_image %>" class="avatar" />
          <span class="author-name"><%= story.owner_id %></span>
        </div>
        <div class="story-meta">
          <h2 class="story-title"><%= story.title %></h2>
          <span class="likes">❤️ <%= story.likes || 0 %></span>
        </div>
      </div>
      <p class="story-body"><%= story.text_body %></p>
    </section>

    <!-- Contribution Form -->
    <form action="/stories/contribute/<%= story.id %>" method="POST" class="contribution-form">
      <textarea name="text" placeholder="Write your contribution here..." required></textarea>
      <button type="submit">Submit</button>
    </form>

    <!-- Submitted Contributions -->
    <section class="contributions">
      <% if (contributions && contributions.length) { %>
        <% contributions.forEach(c => { %>
          <div class="story-block contribution">
            <div class="story-header">
              <div class="user-info">
                <img src="<%= c.user_image %>" class="avatar" />
                <span class="author-name"><%= c.username %></span>
              </div>
              <div class="story-meta">
                <h3 class="story-title">Contribution</h3>
              </div>
            </div>
            <p class="story-body"><%= c.text %></p>
          </div>
        <% }) %>
      <% } %>
    </section>
  </main>
</div>
</body>
</html>
